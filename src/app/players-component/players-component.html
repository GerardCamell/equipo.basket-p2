<div class="container mt-5">

  <!-- Buscador (pipe) -->
  <div class="container d-flex justify-content-end align-items-center mb-3">
    <input
      type="text"
      placeholder="Buscar jugador..."
      [(ngModel)]="searchText"
      class="form-control"
      style="max-width: 220px;"
    />

    <select [(ngModel)]="filterBy" class="form-select ms-2" style="max-width: 160px;">
      <!-- Usa las claves REALES del modelo -->
      <option value="name">Nombre</option>
      <option value="position">Posición</option>
      <option value="age">Edad</option>
    </select>
  </div>

  <!-- Título -->
  <h2 class="text-center mb-4">Lista de jugadores</h2>

  <!-- Carga datos desde Firestore -->
  <ng-container *ngIf="players$ | async as players; else cargando">
    <!-- Detalle del jugador seleccionado -->
    <app-detail-component [player]="selectedPlayer"></app-detail-component>

    <!-- Tabla -->
    <table class="table table-striped table-bordered w-75 mx-auto text-center mt-4">
      <thead class="table-dark">
        <tr>
          <th>Nombre</th>
          <th>Apellido</th>
        </tr>
      </thead>

      <tbody>
        <tr
          *ngFor="let player of players | playerFilter:searchText:filterBy"
          (click)="selectedPlayer = player"
          style="cursor: pointer;"
        >
          <td>{{ player.name }}</td>
          <td>{{ player.lastName }}</td>
        </tr>

        <tr *ngIf="(players | playerFilter:searchText:filterBy).length === 0">
          <td colspan="2" class="text-muted">No hay resultados</td>
        </tr>
      </tbody>
    </table>
  </ng-container>

  <ng-template #cargando>
    <p class="text-center text-muted mt-4">Cargando jugadores…</p>
  </ng-template>
</div>